<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="MemberDAO">

	<!-- 회원가입 암호화 -->
	<insert id="insertMember">
		insert into
		member(id,pass,business_no,business_name,ceo,contact,email,business_address)
		values(#{id},#{pass},#{business_no},#{business_name},#{ceo},#{contact},#{email},#{business_address})
	</insert>
	<!-- 패스워드 체크 -->
	<select id="passChk" resultType="int">
		SELECT COUNT(*) FROM member
		WHERE id = #{id}
		AND pass = #{pass}
	</select>

	<!-- 아이디 중복 체크 -->
	<select id="idChk" resultType="int">
		SELECT COUNT(*) FROM member
		WHERE
		id = #{id}
	</select>
	
	<!-- 비밀번호 변경 -->
	<select id="pwCheck" resultType="String">
		select pass from member where id = #{id}
	</select>

	<update id="pwUpdate">
		update member set pass = #{pass} where id = #{id}
	</update>


	<select id="getMember" resultType="member"
		parameterType="member">
		select * from member where id=#{id} <!-- and pass=#{pass} -->
	</select>

	<update id="updateMypage">
		update member set business_no=#{business_no},
		business_name=#{business_name}, ceo=#{ceo}, contact=#{contact},
		email=#{email}, business_address= #{business_address} where id=#{id}
	</update>

	<update id="updateMypagePass">
		update member set pass=#{pass} where id=#{id}
	</update>


	<update id="insertImg">
		update member set uploadImgFile=#{updateImgFile}
		where id=#{id}
	</update>
	<!-- 발주내역에서 id검색하면 id정보 조회 -->
	<select id="getMemberid" resultType="member"
		parameterType="member">
		select id,business_no,business_name,ceo from member
		where id=#{id}
	</select>

</mapper>